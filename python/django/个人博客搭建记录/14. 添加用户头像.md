#### 1. 修改app accounts的模型，添加用户头像字段
```python
# /accounts/models.py
class Profile(models.Model):
    avatar = models.ImageField(upload_to='avatar/%Y-%m-%d', blank=True, verbose_name='用户头像')
```
#### 2. 数据库迁移
```python
python manage.py makemigrations
python manage.py migrate
```
#### 3. 修改用户中心模板
```python
# templates/accounts/user_info.html
# 添加样式
# static/accounts/member.css
```

#### 4. 修改用户中心视图
使用装饰器验证用户是否登录，未登录用户跳转到登录页面，登录之后再跳转回用户中心页面，添加用户发布博客数量统计
> [the-login-required-decorator](https://docs.djangoproject.com/en/2.2/topics/auth/default/#the-login-required-decorator)
```python
from django.contrib.auth.decorators import login_required

from blog.models import Blog

@login_required(login_url='/accounts/login')
def user_info(request):
    context = {
        'blog_count': Blog.objects.filter(author=request.user).count()
    }
    return render(request, 'accounts/user_info.html', context=context)

# my_notifications/views.py同样修改为使用装饰器验证用户是否登录
```

#### 5.　修改用户登录视图login登录之后跳转到未登录前页面的参数名称
```python
# return redirect(request.GET.get('from', reverse('home')))
# return redirect(request.GET.get('next', reverse('home')))
```